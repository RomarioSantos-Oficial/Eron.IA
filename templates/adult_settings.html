{% extends "base.html" %}

{% block title %}ConfiguraÃ§Ãµes Adultas - Eron{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-10">
            <div class="card border-danger">
                <div class="card-header bg-danger text-white">
                    <h3 class="card-title mb-0">
                        ğŸ” ConfiguraÃ§Ãµes do Modo Adulto
                    </h3>
                </div>
                <div class="card-body">
                    <!-- Status atual -->
                    <div class="alert alert-info">
                        <h5>ğŸ“‹ Status Atual:</h5>
                        <div class="row">
                            <div class="col-md-3">
                                <strong>Intensidade:</strong><br>
                                <span class="badge bg-primary fs-6">{{ adult_prefs.intensity_level if adult_prefs else 1 }}/5</span>
                            </div>
                            <div class="col-md-3">
                                <strong>Estilo:</strong><br>
                                <span class="badge bg-secondary fs-6">
                                    {% if adult_prefs %}
                                        {% if adult_prefs.interaction_style == 'romantic' %}ğŸ’• RomÃ¢ntico
                                        {% elif adult_prefs.interaction_style == 'playful' %}ğŸ˜„ BrincalhÃ£o
                                        {% elif adult_prefs.interaction_style == 'seductive' %}ğŸ˜ Sedutor
                                        {% elif adult_prefs.interaction_style == 'intimate' %}ğŸ’– Ãntimo
                                        {% elif adult_prefs.interaction_style == 'passionate' %}ğŸ”¥ Apaixonado
                                        {% else %}{{ adult_prefs.interaction_style }}
                                        {% endif %}
                                    {% else %}ğŸ’• RomÃ¢ntico
                                    {% endif %}
                                </span>
                            </div>
                            <div class="col-md-3">
                                <strong>PreferÃªncias:</strong><br>
                                <span class="badge bg-success fs-6">
                                    {{ adult_prefs.content_preferences|length if adult_prefs and adult_prefs.content_preferences else 0 }}
                                </span>
                            </div>
                            <div class="col-md-3">
                                <strong>Limites:</strong><br>
                                <span class="badge bg-warning fs-6">
                                    {{ adult_prefs.boundaries|length if adult_prefs and adult_prefs.boundaries else 0 }}
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- FormulÃ¡rio de configuraÃ§Ãµes -->
                    <form method="post">
                        <!-- NÃ­vel de Intensidade -->
                        <div class="mb-4">
                            <label class="form-label h5">âš¡ NÃ­vel de Intensidade</label>
                            <div class="row">
                                {% for level in range(1, 6) %}
                                <div class="col-md mb-2">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="intensity" 
                                               id="intensity{{ level }}" value="{{ level }}"
                                               {% if (adult_prefs and adult_prefs.intensity_level == level) or (not adult_prefs and level == 1) %}checked{% endif %}>
                                        <label class="form-check-label" for="intensity{{ level }}">
                                            <div class="card border-{% if level <= 2 %}success{% elif level <= 3 %}warning{% else %}danger{% endif %} h-100">
                                                <div class="card-body text-center p-2">
                                                    <div class="fw-bold">{{ level }}/5</div>
                                                    <div class="small">
                                                        {% if level == 1 %}ğŸŸ¢ Suave
                                                        {% elif level == 2 %}ğŸŸ¡ Moderado
                                                        {% elif level == 3 %}ğŸŸ  MÃ©dio
                                                        {% elif level == 4 %}ğŸ”´ Intenso
                                                        {% elif level == 5 %}ğŸŸ£ MÃ¡ximo
                                                        {% endif %}
                                                    </div>
                                                </div>
                                            </div>
                                        </label>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                            
                            <!-- DescriÃ§Ãµes dos nÃ­veis -->
                            <div class="mt-2">
                                <div id="intensity-desc">
                                    <div class="alert alert-light">
                                        <strong id="intensity-title">ğŸŸ¢ NÃ­vel 1 - Suave</strong>
                                        <p id="intensity-description" class="mb-0">Romance leve e sutil, conversas carinhosas com linguagem delicada.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Estilo de InteraÃ§Ã£o -->
                        <div class="mb-4">
                            <label class="form-label h5">ğŸ’« Estilo de InteraÃ§Ã£o</label>
                            <div class="row">
                                {% set styles = [
                                    ('romantic', 'ğŸ’•', 'RomÃ¢ntico', 'Carinhoso e doce, focado em sentimentos'),
                                    ('playful', 'ğŸ˜„', 'BrincalhÃ£o', 'Divertido e descontraÃ­do, com humor'),
                                    ('seductive', 'ğŸ˜', 'Sedutor', 'Charmoso e envolvente, mais provocativo'),
                                    ('intimate', 'ğŸ’–', 'Ãntimo', 'PrÃ³ximo e pessoal, conexÃ£o profunda'),
                                    ('passionate', 'ğŸ”¥', 'Apaixonado', 'Intenso e ardente, muito expressivo')
                                ] %}
                                
                                {% for style_value, emoji, style_name, description in styles %}
                                <div class="col-md-6 mb-2">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="style" 
                                               id="style{{ style_value }}" value="{{ style_value }}"
                                               {% if (adult_prefs and adult_prefs.interaction_style == style_value) or (not adult_prefs and style_value == 'romantic') %}checked{% endif %}>
                                        <label class="form-check-label w-100" for="style{{ style_value }}">
                                            <div class="card border-secondary h-100">
                                                <div class="card-body p-2">
                                                    <div class="fw-bold">{{ emoji }} {{ style_name }}</div>
                                                    <div class="small text-muted">{{ description }}</div>
                                                </div>
                                            </div>
                                        </label>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                        
                        <!-- PreferÃªncias de ConteÃºdo -->
                        <div class="mb-4">
                            <label class="form-label h5">ğŸ¯ PreferÃªncias de ConteÃºdo</label>
                            <div class="row">
                                {% set content_prefs = [
                                    ('romantic_talks', 'ğŸ’• Conversas romÃ¢nticas'),
                                    ('intimate_discussions', 'ğŸ’– DiscussÃµes Ã­ntimas'),
                                    ('playful_banter', 'ğŸ˜„ Conversas brincalhonas'),
                                    ('emotional_support', 'ğŸ¤— Suporte emocional'),
                                    ('fantasy_roleplay', 'ğŸ­ Roleplay e fantasia'),
                                    ('deep_connection', 'ğŸ”— ConexÃ£o profunda'),
                                    ('flirtatious_chat', 'ğŸ˜‰ Conversas sedutoras'),
                                    ('passionate_expression', 'ğŸ”¥ ExpressÃµes apaixonadas')
                                ] %}
                                
                                {% for pref_value, pref_name in content_prefs %}
                                <div class="col-md-6 mb-2">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" name="preferences" 
                                               value="{{ pref_value }}" id="pref{{ pref_value }}"
                                               {% if adult_prefs and pref_value in adult_prefs.content_preferences %}checked{% endif %}>
                                        <label class="form-check-label" for="pref{{ pref_value }}">
                                            {{ pref_name }}
                                        </label>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                        
                        <!-- Limites Pessoais -->
                        <div class="mb-4">
                            <label class="form-label h5">ğŸš§ Limites Pessoais</label>
                            <div class="alert alert-warning">
                                <small>âš ï¸ Marque os tipos de conteÃºdo que vocÃª NÃƒO deseja receber:</small>
                            </div>
                            <div class="row">
                                {% set boundaries = [
                                    ('no_explicit_language', 'ğŸš« Linguagem muito explÃ­cita'),
                                    ('no_graphic_content', 'ğŸš« ConteÃºdo muito grÃ¡fico'),
                                    ('no_aggressive_tone', 'ğŸš« Tom agressivo'),
                                    ('no_vulgar_expressions', 'ğŸš« ExpressÃµes vulgares'),
                                    ('keep_respectful', 'âœ… Manter sempre respeitoso'),
                                    ('emotional_boundaries', 'ğŸ›¡ï¸ Respeitar limites emocionais'),
                                    ('no_pressure', 'ğŸš« Sem pressÃ£o ou insistÃªncia'),
                                    ('consent_focused', 'âœ… Focado no consentimento')
                                ] %}
                                
                                {% for boundary_value, boundary_name in boundaries %}
                                <div class="col-md-6 mb-2">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" name="boundaries" 
                                               value="{{ boundary_value }}" id="bound{{ boundary_value }}"
                                               {% if adult_prefs and boundary_value in adult_prefs.boundaries %}checked{% endif %}>
                                        <label class="form-check-label" for="bound{{ boundary_value }}">
                                            {{ boundary_name }}
                                        </label>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                        
                        <!-- BotÃµes de AÃ§Ã£o -->
                        <div class="row">
                            <div class="col-md-4">
                                <button type="submit" class="btn btn-danger btn-lg w-100">
                                    ğŸ’¾ Salvar ConfiguraÃ§Ãµes
                                </button>
                            </div>
                            <div class="col-md-4">
                                <a href="{{ url_for('personalize') }}" class="btn btn-secondary btn-lg w-100">
                                    ğŸ”™ Voltar
                                </a>
                            </div>
                            <div class="col-md-4">
                                <a href="{{ url_for('chat') }}" class="btn btn-success btn-lg w-100">
                                    ğŸ’¬ Ir para o Chat
                                </a>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Atualizar descriÃ§Ã£o do nÃ­vel de intensidade
const intensityRadios = document.querySelectorAll('input[name="intensity"]');
const intensityTitle = document.getElementById('intensity-title');
const intensityDescription = document.getElementById('intensity-description');

const intensityDescriptions = {
    1: {
        title: 'ğŸŸ¢ NÃ­vel 1 - Suave',
        description: 'Romance leve e sutil, conversas carinhosas com linguagem delicada e respeitosa.'
    },
    2: {
        title: 'ğŸŸ¡ NÃ­vel 2 - Moderado', 
        description: 'Romance mais intenso, demonstraÃ§Ãµes de afeto mais claras e conversas mais profundas.'
    },
    3: {
        title: 'ğŸŸ  NÃ­vel 3 - MÃ©dio',
        description: 'Sensualidade presente, linguagem mais ousada e interaÃ§Ãµes mais Ã­ntimas.'
    },
    4: {
        title: 'ğŸ”´ NÃ­vel 4 - Intenso',
        description: 'PaixÃ£o evidente, expressÃµes ardentes e conversas muito Ã­ntimas e pessoais.'
    },
    5: {
        title: 'ğŸŸ£ NÃ­vel 5 - MÃ¡ximo',
        description: 'MÃ¡xima intimidade, linguagem apaixonada e interaÃ§Ãµes muito prÃ³ximas e intensas.'
    }
};

intensityRadios.forEach(radio => {
    radio.addEventListener('change', function() {
        const level = parseInt(this.value);
        const info = intensityDescriptions[level];
        intensityTitle.textContent = info.title;
        intensityDescription.textContent = info.description;
    });
});

// Definir descriÃ§Ã£o inicial baseada no valor selecionado
document.addEventListener('DOMContentLoaded', function() {
    const selectedIntensity = document.querySelector('input[name="intensity"]:checked');
    if (selectedIntensity) {
        const level = parseInt(selectedIntensity.value);
        const info = intensityDescriptions[level];
        intensityTitle.textContent = info.title;
        intensityDescription.textContent = info.description;
    }
});
</script>
{% endblock %}